<Window x:Class="PresentationWPF.Member.OrderDetailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Chi tiết đơn hàng" Height="600" Width="800" 
        WindowStartupLocation="CenterOwner"
        Background="#F8F9FA"
        ResizeMode="CanResize">

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="30">
            <!-- Header -->
            <TextBlock Text="📋 Chi tiết đơn hàng" 
                       Style="{StaticResource PageHeaderStyle}"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,20"/>

            <!-- Order Info Card -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Thông tin đơn hàng" Style="{StaticResource SectionHeaderStyle}"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Left Column -->
                        <StackPanel Grid.Column="0" Margin="0,0,20,0">
                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Mã đơn hàng:" FontWeight="SemiBold"/>
                                <TextBlock Grid.Column="1" x:Name="txtOrderId" FontWeight="Bold" Foreground="#E74C3C"/>
                            </Grid>

                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Ngày đặt:" FontWeight="SemiBold"/>
                                <TextBlock Grid.Column="1" x:Name="txtOrderDate"/>
                            </Grid>

                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Trạng thái:" FontWeight="SemiBold"/>
                                <Border x:Name="statusBorder" CornerRadius="12" Padding="8,4" HorizontalAlignment="Left">
                                    <TextBlock x:Name="txtStatus" Foreground="White" FontWeight="SemiBold" FontSize="12"/>
                                </Border>
                            </Grid>
                        </StackPanel>

                        <!-- Right Column -->
                        <StackPanel Grid.Column="1">
                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Người nhận:" FontWeight="SemiBold"/>
                                <TextBlock Grid.Column="1" x:Name="txtReceiverName"/>
                            </Grid>

                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Số điện thoại:" FontWeight="SemiBold"/>
                                <TextBlock Grid.Column="1" x:Name="txtPhone"/>
                            </Grid>

                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Địa chỉ:" FontWeight="SemiBold"/>
                                <TextBlock Grid.Column="1" x:Name="txtAddress" TextWrapping="Wrap"/>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Order Items Card -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="Sản phẩm đã đặt" Style="{StaticResource SectionHeaderStyle}"/>

                    <DataGrid x:Name="dgOrderDetails"
                              Style="{StaticResource ModernDataGridStyle}"
                              ColumnHeaderStyle="{StaticResource DataGridHeaderStyle}"
                              MinHeight="200">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Tên sản phẩm" Binding="{Binding Product.ProductName}" Width="*"/>
                            <DataGridTextColumn Header="Số lượng" Binding="{Binding Quantity}" Width="100">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="HorizontalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Đơn giá (₫)" Width="120">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Text" Value="{Binding UnitPrice, StringFormat={}{0:N0}}"/>
                                        <Setter Property="HorizontalAlignment" Value="Right"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="Thành tiền (₫)" Width="150">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Text" Value="{Binding Total, StringFormat={}{0:N0}}"/>
                                        <Setter Property="HorizontalAlignment" Value="Right"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Foreground" Value="#E74C3C"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Border>

            <!-- Total and Actions -->
            <Border Style="{StaticResource CardStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Total Amount -->
                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Text="Tổng tiền đơn hàng:" 
                                   FontSize="16" 
                                   Foreground="#666"/>
                        <TextBlock x:Name="txtTotalAmount" 
                                   FontSize="24" 
                                   FontWeight="Bold" 
                                   Foreground="#E74C3C"/>
                    </StackPanel>

                    <!-- Action Buttons -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <Button x:Name="btnCancel"
                                Content="🚫 Hủy đơn hàng" 
                                Style="{StaticResource PrimaryButtonStyle}"
                                Background="#E74C3C"
                                Margin="0,0,15,0"
                                Click="CancelOrder_Click"/>
                        <Button Content="✅ Đóng" 
                                Style="{StaticResource SecondaryButtonStyle}"
                                Click="Close_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Window>
