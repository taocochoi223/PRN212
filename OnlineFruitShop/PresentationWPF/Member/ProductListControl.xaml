<UserControl x:Class="PresentationWPF.Member.ProductListControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:PresentationWPF.Member"
             Background="#F8F9FA">

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="40">
            <!-- Page Header -->
            <TextBlock Text="🍎 Danh sách sản phẩm" Style="{StaticResource PageHeaderStyle}"/>

            <!-- Search Section -->
            <Border Style="{StaticResource SearchBoxStyle}"
                    HorizontalAlignment="Center"
                    Width="500"
                    Margin="0,0,0,30">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="txtSearch"
                             Grid.Column="0"
                             BorderThickness="0"
                             Background="Transparent"
                             FontSize="14"
                             VerticalAlignment="Center"
                             TextChanged="txtSearch_TextChanged"/>

                    <TextBlock x:Name="txtPlaceholder"
                               Grid.Column="0"
                               Text="Tìm kiếm sản phẩm..."
                               Foreground="Gray"
                               FontSize="14"
                               VerticalAlignment="Center"
                               IsHitTestVisible="False"/>

                    <Button Grid.Column="1"
                            Content="🔍"
                            Background="Transparent"
                            BorderThickness="0"
                            FontSize="16"
                            Click="SearchButton_Click"/>
                </Grid>
            </Border>

            <!-- Products Grid -->
            <ItemsControl x:Name="itemsProduct">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel HorizontalAlignment="Center"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource ProductCardStyle}" Width="280">
                            <StackPanel>
                                <Image Source="{Binding ImageUrl}"
                                       Height="180"
                                       Stretch="UniformToFill"
                                       Margin="0,0,0,15"/>

                                <TextBlock Text="{Binding ProductName}"
                                           FontWeight="Bold"
                                           FontSize="16"
                                           Margin="0,0,0,5"/>

                                <TextBlock Text="{Binding CategoryName}"
                                           FontStyle="Italic"
                                           FontSize="12"
                                           Foreground="Gray"
                                           Margin="0,0,0,8"/>

                                <TextBlock Text="{Binding Description}"
                                           FontSize="13"
                                           TextWrapping="Wrap"
                                           Foreground="#666"
                                           Margin="0,0,0,10"
                                           MaxHeight="40"/>

                                <Grid Margin="0,10,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{Binding Price, StringFormat={}{0:N0}₫}"
                                                   Foreground="#E74C3C"
                                                   FontWeight="Bold"
                                                   FontSize="18"/>
                                        <TextBlock Text="{Binding Quantity, StringFormat={}Còn: {0}}"
                                                   Foreground="Gray"
                                                   FontSize="12"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <Button Content="🔍"
                                                Style="{StaticResource SecondaryButtonStyle}"
                                                Padding="8"
                                                Margin="0,0,5,0"
                                                Click="Detail_Click"
                                                ToolTip="Xem chi tiết"/>
                                        <Button Content="🛒"
                                                Style="{StaticResource PrimaryButtonStyle}"
                                                Padding="8"
                                                Click="AddToCart_Click"
                                                ToolTip="Thêm vào giỏ hàng"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </ScrollViewer>
</UserControl>
